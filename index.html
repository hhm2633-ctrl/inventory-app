<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ì†”ë¦¬ë“œì˜´ë¯€ ì•„ìš¸ë › ì¬ê³  ì¡°íšŒ</title>
<link rel="manifest" href="manifest.webmanifest?v=12" />
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<style>
  :root { --bg:#0b0f14; --card:#121820; --muted:#94a3b8; --fg:#e8eef6; --accent:#5bbcff;
          --ok:#16a34a; --warn:#d97706; --bad:#ef4444; --incoming:#3b82f6; }
  html,body{margin:0;padding:0;background:#0b0f14;color:var(--fg);
            font:15px/1.5 system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;}
  .wrap{max-width:1100px;margin:24px auto;padding:0 14px;}
  h1{margin:0 0 16px 0;font-size:24px;}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .btn{background:#111827;border:1px solid #273547;color:#d9e7ff;padding:9px 12px;border-radius:12px;cursor:pointer}
  .btn.big{padding:10px 14px;font-weight:700}
  .btn.primary{background:#0f172a;border-color:#2b3a52}
  .btn.green{background:#0f2b1b;border-color:#1f5c37}
  .btn.blue{background:#0f1a3a;border-color:#3d4aac}
  .btn.ghost{background:transparent;border-color:#2b3a52}
  .search{width:100%;padding:12px 14px;border-radius:14px;border:1px solid #273547;background:#0f1620;color:var(--fg);font-size:16px;}
  .card{background:linear-gradient(180deg,#121820,#0d1420);border:1px solid #1c2430;border-radius:16px;padding:16px;}
  .pill{border:1px solid #2a3950;background:#0f172a;color:#cfe8ff;border-radius:999px;padding:5px 9px;font-size:12px}
  .state{display:inline-block;border-radius:16px;padding:6px 12px;font-size:13px;border:1px solid transparent;
         cursor:pointer; background:#0f172a; color:#cfe8ff}
  .state.ok{background:#0f2b1b;border-color:#1f5c37;color:#b9f7d5}
  .state.warn{background:#2c1e0a;border-color:#7a4d17;color:#ffe4b5}
  .state.bad{background:#3a0f14;border-color:#7a1d22;color:#ffc9c9; cursor:default}
  .state:disabled{opacity:.6;cursor:not-allowed}
  .sizeCol{display:flex;flex-direction:column;gap:8px}
  .sizeItem{display:flex;align-items:center;gap:10px}
  .sizeTag{min-width:44px;text-align:center;border:1px solid #2a3950;border-radius:10px;padding:6px 8px;background:#0e1726;color:#cfe8ff;font-size:13px}
  .grid{display:grid;grid-template-columns:1fr 210px 1fr;gap:10px;align-items:center}
  .select{padding:9px 12px;border-radius:10px;border:1px solid #273547;background:#0e1622;color:var(--fg)}
  .price{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .price .now{font-weight:800;font-size:17px}
  .price .orig{color:#a8b5c6;text-decoration:line-through}
  .price .rate{color:#9fe4b0}
  .fitBox{margin-top:12px;border:1px dashed #2e3c52;border-radius:12px;padding:10px;background:#0f172a}
  .fitHead{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
  .fitList{display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:8px}
  .fitItem{border:1px solid #273547;border-radius:10px;padding:8px;background:#0e1622;font-size:13px}
  .fitSmall{color:#9fb0c6;font-size:12px}
  .totalBox{margin-top:8px;border:1px dashed #2e3c52;border-radius:12px;padding:8px 10px;background:#0f172a}
  .totalBox .line{display:flex;justify-content:space-between;margin:2px 0}
  .totalBox .sum{font-weight:800}
  .hint{font-size:12px;color:#a5b4c6}
  footer{margin:24px 0;color:#9aa7b8;font-size:13px;display:flex;gap:14px;flex-wrap:wrap;justify-content:flex-end}
  .hero{position:fixed;inset:0;z-index:-1;background:url('031.jpg') center/cover no-repeat;filter:brightness(.35)}
  .modalBack{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:9999;padding:10px}
  .modal{width:min(560px,94vw);max-height:88vh;display:flex;flex-direction:column;background:#101622;border:1px solid #1e2a3a;border-radius:16px;}
  .modalHeader{padding:14px 16px;border-bottom:1px solid #1c2430;display:flex;align-items:center;justify-content:space-between}
  .modalBody{padding:14px 16px;overflow:auto}
  .modalFooter{padding:12px 16px;border-top:1px solid #1c2430;display:flex;justify-content:flex-end;gap:8px}
  .muted{color:#a1a8b5}
  .small{font-size:12px;color:#9fb0c6}
  input.txt, textarea.txt{width:100%;padding:9px 11px;border-radius:10px;border:1px solid #2a3950;background:#0f172a;color:#e7f0ff;font-size:14px}
  textarea.txt{min-height:64px;resize:vertical}
  .label{font-size:12px;color:#9fb0c6;margin:6px 0 4px}
  .formGrid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  @media (max-width:520px){ .grid{grid-template-columns:1fr;gap:8px} }
</style>
</head>
<body>
<div class="hero"></div>
<div class="wrap">
  <div class="row" style="justify-content:flex-end;gap:8px;margin-bottom:6px">
    <a class="btn" href="tel:0221369886">ğŸ“ ë§¤ì¥ ì „í™”</a>
    <a class="btn" href="https://pf.kakao.com/_EfjEj" target="_blank">ğŸ’¬ ì¹´ì¹´ì˜¤ ì±„ë„</a>
  </div>

  <h1>ì†”ë¦¬ë“œì˜´ë¯€ ì•„ìš¸ë › ì¬ê³  ì¡°íšŒ</h1>

  <div class="card" style="margin-bottom:12px">
    <div class="row" style="gap:8px">
      <input id="q" class="search" placeholder="ì˜ˆ: s243ts26â€¦" />
      <button class="btn" id="srchBtn">ğŸ” ê²€ìƒ‰</button>
    </div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 10px 0">ì¬ê³  ê²°ê³¼</h3>
    <div id="result"></div>
  </div>
</div>

<!-- ì£¼ë¬¸ ëª¨ë‹¬ -->
<div id="orderBack" class="modalBack" onclick="closeOrder(event)">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modalHeader"><h3 style="margin:0;font-size:18px">ì£¼ë¬¸ì„œ ì‘ì„±</h3><button class="btn ghost" onclick="closeOrder()">ë‹«ê¸°</button></div>
    <div class="modalBody">
      <div id="orderSel" class="muted" style="margin-bottom:8px"></div>
      <div class="formGrid" style="margin-top:8px">
        <div><div class="label">í‚¤ (cm)</div><input id="height" class="txt" placeholder="ì˜ˆ: 178" inputmode="numeric" /></div>
        <div><div class="label">ëª¸ë¬´ê²Œ (kg)</div><input id="weight" class="txt" placeholder="ì˜ˆ: 72" inputmode="numeric" /></div>
      </div>
      <label class="small" style="display:flex;gap:6px;align-items:center;margin-top:6px">
        <input id="shareFit" type="checkbox" /> ì´ ì²´í˜• ì •ë³´ë¥¼ ìµëª…ìœ¼ë¡œ ê³µê°œ
      </label>
      <div class="copy" style="margin-top:8px">
        <div><b>ì£¼ë¬¸ ë¯¸ë¦¬ë³´ê¸°</b></div>
        <pre id="orderPreview" style="white-space:pre-wrap;margin:6px 0 0 0"></pre>
      </div>
    </div>
    <div class="modalFooter">
      <button class="btn primary" onclick="sendOrder()">ì£¼ë¬¸ ë³´ë‚´ê¸°</button>
    </div>
  </div>
</div>

<!-- ì£¼ë¬¸ í™•ì¸ì¤‘ ëª¨ë‹¬ -->
<div id="pendingBack" class="modalBack" onclick="closePending(event)">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modalHeader"><h3 style="margin:0;font-size:18px">ì£¼ë¬¸ í™•ì¸ì¤‘</h3><button class="btn ghost" onclick="closePending()">í™•ì¸</button></div>
    <div class="modalBody"><div class="muted">
ì˜ì—…ì‹œê°„ 10:30~21:00 ì‹¤ì‹œê°„ ë§¤ì¥í™•ì¸ ì—°ë½ë“œë¦¬ë©°
ì˜ì—…ì‹œê°„ ì´í›„ ì£¼ë¬¸ì€ ë‹¤ìŒë‚  ìˆœì°¨ì ìœ¼ë¡œ ì—°ë½ë“œë¦½ë‹ˆë‹¤.
íƒë°°ë¹„: 40ë§Œì› ì´ìƒ ë¬´ë£Œ / ê·¸ ì´í•˜ 3,000ì›
ë‹¨ìˆœ êµí™˜ ì™•ë³µ 7,000ì› / êµ­ë¯¼ 61670101634455 ì†”ë¦¬ë“œ(í•œí™ëª…)
    </div></div>
  </div>
</div>

<script>
const INV_URL = `inventory.json?v=${Date.now()}`;
const KAKAO_CHAT = 'https://pf.kakao.com/_EfjEj/chat';
const FIT_API = 'https://script.google.com/macros/s/AKfycbxiEClhSskp-Cz4ufqv7pr_1TUeRLfPPp0sWUX0t01obnQ7ISUTPwVSxyerx3PrXwPd/exec'; // ë°”ê¾¸ì„¸ìš”

function $(s){return document.querySelector(s);}
function nz(v){return v==null?'':String(v).trim();}
function fmtWon(v){return (v==null||v==='')?'-':Number(v).toLocaleString()+'ì›';}

async function load(){
  const res=await fetch(INV_URL,{cache:'no-store'});
  INV=await res.json();
}
let INV=[];

function render(list){
  if(!list.length){$('#result').innerHTML='<div style="color:#9aa7b8">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';return;}
  const html=list.map(r=>`<div class="pill">${r['ìƒí’ˆì½”ë“œ']} ${r['ìƒ‰ìƒ']} ${r['ì‚¬ì´ì¦ˆ']} - ${r['íŒë§¤ê°€']?fmtWon(r['íŒë§¤ê°€']):'ê°€ê²©ì •ë³´ ì—†ìŒ'} <button class='btn small' onclick="openOrder('${r['ìƒí’ˆì½”ë“œ']}','${r['ìƒ‰ìƒ']}','${r['ì‚¬ì´ì¦ˆ']}')">ì£¼ë¬¸</button></div>`).join('');
  $('#result').innerHTML=html;
}

function search(){
  const q=nz($('#q').value).toLowerCase();
  const rows=INV.filter(r=>nz(r['ìƒí’ˆì½”ë“œ']).toLowerCase().includes(q));
  render(rows);
}
$('#srchBtn').onclick=search;
$('#q').onkeydown=e=>{if(e.key==='Enter')search();};

let cur={style:'',color:'',size:''};
function openOrder(style,color,size){
  cur={style,color,size};
  $('#orderSel').textContent=`ì„ íƒ: ${style} ${color} ${size}`;
  $('#orderPreview').textContent=`ìƒí’ˆì½”ë“œ: ${style}\nìƒ‰ìƒ: ${color}\nì‚¬ì´ì¦ˆ: ${size}`;
  $('#orderBack').style.display='flex';
}
function closeOrder(){ $('#orderBack').style.display='none'; }
function closePending(){ $('#pendingBack').style.display='none'; }

async function sendOrder(){
  const msg=$('#orderPreview').textContent+'\n\nì†”ë¦¬ë“œì˜´ë¯€ ì•„ìš¸ë › ì£¼ë¬¸ìš”ì²­';
  try{await navigator.clipboard.writeText(msg);}catch{}
  if($('#shareFit').checked){
    const params=new URLSearchParams({
      style:cur.style,color:cur.color,size:cur.size,
      height_cm:$('#height').value,weight_kg:$('#weight').value
    });
    fetch(FIT_API,{method:'POST',
      headers:{'Content-Type':'application/x-www-form-urlencoded;charset=UTF-8'},
      body:params.toString()});
  }
  window.open(KAKAO_CHAT,'_blank');
  alert('ì£¼ë¬¸ ë‚´ìš©ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\nì¹´ì¹´ì˜¤ ì±„ë„ì— ë¶™ì—¬ë„£ê¸° í•´ì£¼ì„¸ìš”.');
  closeOrder();
  $('#pendingBack').style.display='flex';
}

load();
</script>
</body>
</html>
